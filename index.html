<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Farmer Support Platform</title>
    <link rel="stylesheet" href="styles.css">
</head>
<body>
    <header>
        <div class="logo">
            <h1>Farm Support</h1>
        </div>
        <nav>
            <ul>
                <li><a href="#" onclick="loadContent('about'); return false;">About</a></li>
                <li><a href="#" onclick="loadContent('register'); return false;">Register</a></li>
                <li><a href="#" onclick="loadContent('contact'); return false;">Contact</a></li>
            </ul>
        </nav>
    </header>

    <section id="hero">
        <div class="hero-content">
            <h2>Empowering Farmers with Mechanization Support</h2>
            <p>Register today to receive personalized agricultural assistance.</p>
        </div>
    </section>

    <section id="content-section">
        <h2>Welcome to Farm Support!</h2>
        <p>Click the links above to see dynamic content.</p>
    </section>

    <footer>
        <div class="footer-content">
            <p>&copy; 2025 Farm Support. All rights reserved.</p>
        </div>
    </footer>

    <!-- Firebase SDKs -->
    <script type="module">
        import { initializeApp } from "https://www.gstatic.com/firebasejs/10.7.1/firebase-app.js";
        import { getFirestore, collection, addDoc } from "https://www.gstatic.com/firebasejs/10.7.1/firebase-firestore.js";

        // Firebase config
        const firebaseConfig = {
            apiKey: "AIzaSyCQhN1TJRcRJ2ef34uCgRtPZON7E4lJj64",
            authDomain: "farmer-data-collection-48d45.firebaseapp.com",
            projectId: "farmer-data-collection-48d45",
            storageBucket: "farmer-data-collection-48d45.firebasestorage.app",
            messagingSenderId: "755785555291",
            appId: "1:755785555291:web:714b31f381697e43238e7e"
        };

        // Initialize Firebase
        const app = initializeApp(firebaseConfig);
        const db = getFirestore(app);

        // Function to load content dynamically
        window.loadContent = function(page) {
            const contentSection = document.getElementById('content-section');

            if (page === 'about') {
                contentSection.innerHTML = `
                    <h2>About Us</h2>
                    <p>We help farmers access mechanized support and improve productivity.</p>
                `;
            } else if (page === 'register') {
                contentSection.innerHTML = `
                    <h2>Farmer Registration</h2>
                    <form id="farmerForm">
                        <label>Name:</label>
                        <input type="text" id="farmerName" required>

                        <label>Phone Number:</label>
                        <input type="tel" id="farmerPhone" required>

                        <label>Location:</label>
                        <input type="text" id="farmerLocation" required>

                        <label>Farming Type:</label>
                        <select id="farmingType">
                            <option value="Crop Farming">Crop Farming</option>
                            <option value="Livestock Farming">Livestock Farming</option>
                            <option value="Mixed Farming">Mixed Farming</option>
                        </select>

                        <label>Mechanization Needs:</label>
                        <textarea id="mechanizationNeeds"></textarea>

                        <button type="submit">Register</button>
                    </form>
                    <div id="alertMessage"></div>
                `;

                // Attach event listener after loading content
                document.getElementById('farmerForm').addEventListener('submit', async function(event) {
                    event.preventDefault();

                    let farmerID = generateFarmerID();
                    const farmerName = document.getElementById('farmerName').value;
                    const farmerPhone = document.getElementById('farmerPhone').value;
                    const farmerLocation = document.getElementById('farmerLocation').value;
                    const farmingType = document.getElementById('farmingType').value;
                    const mechanizationNeeds = document.getElementById('mechanizationNeeds').value;

                    try {
                        await addDoc(collection(db, "farmers"), {
                            name: farmerName,
                            phone: farmerPhone,
                            location: farmerLocation,
                            farmingType: farmingType,
                            mechanizationNeeds: mechanizationNeeds,
                            farmerID: farmerID
                        });

                        document.getElementById('alertMessage').innerHTML = `Registration successful! Farmer ID: <strong>${farmerID}</strong>`;
                    } catch (e) {
                        document.getElementById('alertMessage').innerHTML = `Error: ${e.message}`;
                    }
                });
            } else if (page === 'contact') {
                contentSection.innerHTML = `
                    <h2>Contact Us</h2>
                    <p>Email: support@farmsupport.com</p>
                    <p>Phone: +123-456-7890</p>
                `;
            }
        };

        // Function to generate an easy-to-remember Farmer ID
        function generateFarmerID() {
            const chars = 'ABCDEFGHJKLMNPQRSTUVWXYZ23456789';
            let id = '';
            for (let i = 0; i < 6; i++) {
                id += chars.charAt(Math.floor(Math.random() * chars.length));
            }
            return id;
        }

        // Load home content on page load
        window.onload = () => loadContent('home');
    </script>
</body>
</html>
